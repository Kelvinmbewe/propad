#1 [internal] load local bake definitions
#1 reading from stdin 930B done
#1 DONE 0.0s

#2 [internal] load build definition from web.Dockerfile
#2 transferring dockerfile:
#2 transferring dockerfile: 1.20kB 0.1s done
#2 DONE 0.3s

#3 [internal] load metadata for docker.io/library/node:20-slim
#3 ...

#4 [auth] library/node:pull token for registry-1.docker.io
#4 DONE 0.0s

#3 [internal] load metadata for docker.io/library/node:20-slim
#3 DONE 3.3s

#5 [internal] load .dockerignore
#5 transferring context: 2B 0.0s done
#5 DONE 0.1s

#6 [internal] load build context
#6 DONE 0.0s

#7 [builder  1/15] FROM docker.io/library/node:20-slim@sha256:a270640213033657548b7ed57852709a0d2ee3b277f902f912367216aa8e9520
#7 resolve docker.io/library/node:20-slim@sha256:a270640213033657548b7ed57852709a0d2ee3b277f902f912367216aa8e9520 0.1s done
#7 DONE 0.1s

#6 [internal] load build context
#6 transferring context: 113.11kB 11.7s
#6 transferring context: 163.16kB 12.1s done
#6 DONE 12.6s

#8 [builder  2/15] WORKDIR /app
#8 CACHED

#9 [builder  3/15] COPY package*.json ./
#9 CACHED

#10 [builder  4/15] COPY pnpm-workspace.yaml ./
#10 CACHED

#11 [builder  5/15] COPY tsconfig.json ./
#11 CACHED

#12 [builder  6/15] COPY packages ./packages
#12 DONE 1.2s

#13 [builder  7/15] COPY apps/web ./apps/web
#13 DONE 44.4s

#14 [builder  8/15] COPY apps/api/prisma ./apps/web/prisma
#14 DONE 3.1s

#15 [builder  9/15] RUN npm install -g pnpm@10.19.0
#15 15.02 
#15 15.02 added 1 package in 9s
#15 15.02 
#15 15.02 1 package is looking for funding
#15 15.02   run `npm fund` for details
#15 15.03 npm notice
#15 15.03 npm notice New major version of npm available! 10.8.2 -> 11.7.0
#15 15.03 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.7.0
#15 15.03 npm notice To update run: npm install -g npm@11.7.0
#15 15.03 npm notice
#15 DONE 15.6s

#16 [builder 10/15] RUN pnpm config set fetch-retries 5     && pnpm config set fetch-retry-mintimeout 20000     && pnpm config set fetch-retry-maxtimeout 120000
#16 DONE 6.9s

#17 [builder 11/15] RUN pnpm install --recursive --frozen-lockfile=false
#17 3.275 Scope: all 7 workspace projects
#17 4.138 Progress: resolved 1, reused 0, downloaded 0, added 0
#17 5.156 Progress: resolved 8, reused 0, downloaded 3, added 0
#17 5.755 
#17 5.755    Ôò¡ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔò«
#17 5.755    Ôöé                                          Ôöé
#17 5.755    Ôöé   Update available! 10.19.0 ÔåÆ 10.27.0.   Ôöé
#17 5.755    Ôöé   Changelog: https://pnpm.io/v/10.27.0   Ôöé
#17 5.755    Ôöé     To update, run: pnpm add -g pnpm     Ôöé
#17 5.755    Ôöé                                          Ôöé
#17 5.755    Ôò░ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔò»
#17 5.755 
#17 6.155 Progress: resolved 14, reused 0, downloaded 10, added 0
#17 7.266 Progress: resolved 23, reused 1, downloaded 14, added 0
#17 8.280 Progress: resolved 32, reused 3, downloaded 20, added 0
#17 9.303 Progress: resolved 38, reused 3, downloaded 28, added 0
#17 10.39 Progress: resolved 39, reused 3, downloaded 30, added 0
#17 11.40 Progress: resolved 46, reused 3, downloaded 33, added 0
#17 12.42 Progress: resolved 52, reused 3, downloaded 39, added 0
#17 13.80 Progress: resolved 54, reused 3, downloaded 41, added 0
#17 15.34 Progress: resolved 57, reused 3, downloaded 44, added 0
#17 16.39 Progress: resolved 59, reused 3, downloaded 49, added 0
#17 17.53 Progress: resolved 61, reused 3, downloaded 50, added 0
#17 18.53 Progress: resolved 63, reused 3, downloaded 53, added 0
#17 19.53 Progress: resolved 63, reused 3, downloaded 57, added 0
#17 21.22 ÔÇëWARNÔÇë Request took 16026ms: https://registry.npmjs.org/prisma
#17 23.41 Progress: resolved 64, reused 3, downloaded 59, added 0
#17 26.62 ÔÇëWARNÔÇë Request took 18070ms: https://registry.npmjs.org/next
#17 27.14 apps/web                                 | ÔÇëWARNÔÇë deprecated next@14.2.3
#17 27.23 Progress: resolved 65, reused 3, downloaded 60, added 0
#17 29.97 ÔÇëWARNÔÇë Request took 23469ms: https://registry.npmjs.org/@prisma%2Fclient
#17 31.08 Progress: resolved 66, reused 3, downloaded 60, added 0
#17 32.10 Progress: resolved 67, reused 3, downloaded 60, added 0
#17 34.04 Progress: resolved 68, reused 3, downloaded 62, added 0
#17 35.05 Progress: resolved 95, reused 3, downloaded 69, added 0
#17 36.05 Progress: resolved 108, reused 3, downloaded 88, added 0
#17 37.06 Progress: resolved 128, reused 3, downloaded 105, added 0
#17 38.05 Progress: resolved 138, reused 3, downloaded 115, added 0
#17 39.11 Progress: resolved 147, reused 3, downloaded 123, added 0
#17 40.11 Progress: resolved 167, reused 3, downloaded 143, added 0
#17 41.38 Progress: resolved 187, reused 3, downloaded 159, added 0
#17 42.38 Progress: resolved 210, reused 3, downloaded 176, added 0
#17 44.39 Progress: resolved 215, reused 3, downloaded 188, added 0
#17 45.41 Progress: resolved 233, reused 3, downloaded 201, added 0
#17 46.82 Progress: resolved 246, reused 3, downloaded 217, added 0
#17 47.99 Progress: resolved 251, reused 3, downloaded 219, added 0
#17 48.99 Progress: resolved 253, reused 3, downloaded 223, added 0
#17 50.92 Progress: resolved 261, reused 3, downloaded 226, added 0
#17 52.88 Progress: resolved 267, reused 3, downloaded 231, added 0
#17 54.23 Progress: resolved 276, reused 3, downloaded 231, added 0
#17 55.26 Progress: resolved 280, reused 3, downloaded 232, added 0
#17 56.27 Progress: resolved 282, reused 3, downloaded 236, added 0
#17 57.27 Progress: resolved 289, reused 3, downloaded 245, added 0
#17 58.29 Progress: resolved 302, reused 3, downloaded 254, added 0
#17 59.31 Progress: resolved 310, reused 3, downloaded 266, added 0
#17 60.32 Progress: resolved 319, reused 3, downloaded 268, added 0
#17 61.95 Progress: resolved 323, reused 3, downloaded 274, added 0
#17 62.95 Progress: resolved 326, reused 3, downloaded 278, added 0
#17 65.14 Progress: resolved 327, reused 3, downloaded 278, added 0
#17 66.19 Progress: resolved 337, reused 3, downloaded 283, added 0
#17 67.37 Progress: resolved 342, reused 3, downloaded 299, added 0
#17 68.38 Progress: resolved 362, reused 3, downloaded 311, added 0
#17 69.41 Progress: resolved 381, reused 3, downloaded 336, added 0
#17 70.47 Progress: resolved 402, reused 3, downloaded 353, added 0
#17 71.56 Progress: resolved 406, reused 3, downloaded 360, added 0
#17 72.57 Progress: resolved 409, reused 3, downloaded 361, added 0
#17 73.70 Progress: resolved 412, reused 3, downloaded 365, added 0
#17 75.44 Progress: resolved 414, reused 3, downloaded 369, added 0
#17 77.51 Progress: resolved 415, reused 3, downloaded 369, added 0
#17 78.95 Progress: resolved 418, reused 3, downloaded 372, added 0
#17 80.37 ÔÇëWARNÔÇë Request took 10076ms: https://registry.npmjs.org/@typescript-eslint%2Fscope-manager
#17 81.15 Progress: resolved 437, reused 3, downloaded 384, added 0
#17 82.21 Progress: resolved 446, reused 3, downloaded 395, added 0
#17 83.24 Progress: resolved 458, reused 3, downloaded 406, added 0
#17 84.28 Progress: resolved 460, reused 3, downloaded 409, added 0
#17 85.29 Progress: resolved 480, reused 3, downloaded 429, added 0
#17 86.31 Progress: resolved 490, reused 3, downloaded 438, added 0
#17 87.55 Progress: resolved 507, reused 3, downloaded 446, added 0
#17 88.55 Progress: resolved 523, reused 3, downloaded 465, added 0
#17 92.07 Progress: resolved 541, reused 3, downloaded 466, added 0
#17 94.06 Progress: resolved 556, reused 3, downloaded 468, added 0
#17 95.20 ÔÇëWARNÔÇë Request took 10720ms: https://registry.npmjs.org/@prisma%2Ffetch-engine
#17 96.95 Progress: resolved 569, reused 3, downloaded 470, added 0
#17 97.95 Progress: resolved 618, reused 3, downloaded 493, added 0
#17 98.96 Progress: resolved 647, reused 3, downloaded 527, added 0
#17 99.97 Progress: resolved 672, reused 3, downloaded 548, added 0
#17 101.0 Progress: resolved 698, reused 3, downloaded 571, added 0
#17 102.0 Progress: resolved 731, reused 3, downloaded 605, added 0
#17 103.0 Progress: resolved 764, reused 3, downloaded 634, added 0
#17 104.0 Progress: resolved 801, reused 3, downloaded 674, added 0
#17 105.0 Progress: resolved 832, reused 3, downloaded 697, added 0
#17 106.0 Progress: resolved 881, reused 3, downloaded 746, added 0
#17 107.0 Progress: resolved 909, reused 3, downloaded 796, added 0
#17 108.0 Progress: resolved 916, reused 3, downloaded 830, added 0
#17 109.1 Progress: resolved 919, reused 3, downloaded 832, added 0
#17 109.2 .                                        | +834 ++++++++++++++++++++++++++++++++
#17 110.1 Progress: resolved 919, reused 3, downloaded 833, added 0
#17 111.1 Progress: resolved 919, reused 3, downloaded 833, added 342
#17 112.1 Progress: resolved 919, reused 3, downloaded 833, added 647
#17 113.1 Progress: resolved 919, reused 3, downloaded 833, added 812
#17 114.1 Progress: resolved 919, reused 3, downloaded 833, added 833
#17 114.6 Progress: resolved 919, reused 3, downloaded 833, added 834, done
#17 116.8 .../node_modules/@prisma/engines postinstall$ node scripts/postinstall.js
#17 117.2 .../esbuild@0.19.12/node_modules/esbuild postinstall$ node install.js
#17 117.2 .../esbuild@0.21.5/node_modules/esbuild postinstall$ node install.js
#17 117.9 .../esbuild@0.21.5/node_modules/esbuild postinstall: Done
#17 117.9 .../esbuild@0.19.12/node_modules/esbuild postinstall: Done
#17 118.2 .../node_modules/@prisma/engines postinstall: prisma:warn Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-1.1.x".
#17 118.2 .../node_modules/@prisma/engines postinstall: Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.
#17 122.5 .../node_modules/@prisma/engines postinstall: Done
#17 123.7 .../prisma@5.22.0/node_modules/prisma preinstall$ node scripts/preinstall-entry.js
#17 124.1 .../prisma@5.22.0/node_modules/prisma preinstall: Done
#17 124.6 .../node_modules/@prisma/client postinstall$ node scripts/postinstall.js
#17 126.9 .../node_modules/@prisma/client postinstall: prisma:warn Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-1.1.x".
#17 126.9 .../node_modules/@prisma/client postinstall: Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.
#17 127.8 .../node_modules/@prisma/client postinstall: prisma:warn We could not find your Prisma schema in the default locations (see: https://pris.ly/d/prisma-schema-location).
#17 127.8 .../node_modules/@prisma/client postinstall: If you have a Prisma schema file in a custom path, you will need to run
#17 127.8 .../node_modules/@prisma/client postinstall: `prisma generate --schema=./path/to/your/schema.prisma` to generate Prisma Client.
#17 127.8 .../node_modules/@prisma/client postinstall: If you do not have a Prisma schema file yet, you can ignore this message.
#17 127.8 .../node_modules/@prisma/client postinstall: Done
#17 136.1 . preinstall$ node -e "const ua=process.env.npm_config_user_agent||''; if(!ua.includes('pnpm')) console.warn('[warn] Please use pnpm. Detected UA:', ua);"
#17 136.5 . preinstall: Done
#17 136.9 Done in 2m 15.2s using pnpm v10.19.0
#17 DONE 138.4s

#18 [builder 12/15] WORKDIR /app/apps/web
#18 DONE 3.0s

#19 [builder 13/15] RUN pnpm exec prisma generate --schema ./prisma/schema.prisma
#19 5.228 prisma:warn Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-1.1.x".
#19 5.228 Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.
#19 5.909 Environment variables loaded from .env
#19 5.926 Prisma schema loaded from prisma/schema.prisma
#19 6.041 prisma:warn Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-1.1.x".
#19 6.041 Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.
#19 13.87 
#19 13.87 Ô£ö Generated Prisma Client (v5.22.0) to ./node_modules/.prisma/client in 4.13s
#19 13.87 
#19 13.87 Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)
#19 13.87 
#19 13.87 Tip: Curious about the SQL queries Prisma ORM generates? Optimize helps you enhance your visibility: https://pris.ly/tip-2-optimize
#19 13.87 
#19 DONE 14.4s

#20 [builder 14/15] WORKDIR /app
#20 DONE 0.2s

#21 [builder 15/15] RUN pnpm --filter @propad/web... run build
#21 2.631 Scope: 4 of 7 workspace projects
#21 2.650 packages/config build$ tsc -p tsconfig.json
#21 2.653 packages/sdk build$ tsc -p tsconfig.json
#21 2.656 packages/ui build$ tsc -p tsconfig.json
#21 8.684 packages/config build: Done
#21 12.51 packages/ui build: Done
#21 14.58 packages/sdk build: Done
#21 14.58 apps/web build$ next build
#21 20.03 apps/web build: Attention: Next.js now collects completely anonymous telemetry regarding usage.
#21 20.03 apps/web build: This information is used to shape Next.js' roadmap and prioritize features.
#21 20.04 apps/web build: You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#21 20.04 apps/web build: https://nextjs.org/telemetry
#21 20.18 apps/web build:   Ôû▓ Next.js 14.2.3
#21 20.19 apps/web build:   - Environments: .env.local, .env
#21 20.19 apps/web build:   - Experiments (use with caution):
#21 20.19 apps/web build:     ┬À instrumentationHook
#21 21.05 apps/web build:    Creating an optimized production build ...
#21 22.93 apps/web build:  Ô£ô (pwa) Compiling for server...
#21 22.94 apps/web build:  Ô£ô (pwa) Compiling for server...
#21 22.95 apps/web build:  Ô£ô (pwa) Compiling for client (static)...
#21 22.96 apps/web build:  Ôùï (pwa) Service worker: /app/apps/web/public/sw.js
#21 22.96 apps/web build:  Ôùï (pwa)   URL: /sw.js
#21 22.96 apps/web build:  Ôùï (pwa)   Scope: /
#21 181.0 apps/web build:  Ô£ô Compiled successfully
#21 181.0 apps/web build:    Linting and checking validity of types ...
#21 261.9 apps/web build: Failed to compile.
#21 261.9 apps/web build: ./app/(dashboard)/dashboard/admin/payouts/page.tsx:19:19
#21 261.9 apps/web build: Type error: Argument of type 'objectOutputType<{ id: ZodString; walletId: ZodString; amountCents: ZodNumber; method: ZodString; payoutAccountId: ZodString; status: ZodString; ... 5 more ...; payoutAccount: ZodOptional<...>; }, ZodTypeAny, "passthrough">[]' is not assignable to parameter of type 'SetStateAction<({ status: string; id: string; createdAt: string; updatedAt: string; amountCents: number; walletId: string; method: string; payoutAccountId: string; scheduledFor?: string | null | undefined; txRef?: string | ... 1 more ... | undefined; wallet?: objectOutputType<...> | ... 1 more ... | undefined; payou...'.
#21 261.9 apps/web build:   Type 'objectOutputType<{ id: ZodString; walletId: ZodString; amountCents: ZodNumber; method: ZodString; payoutAccountId: ZodString; status: ZodString; ... 5 more ...; payoutAccount: ZodOptional<...>; }, ZodTypeAny, "passthrough">[]' is not assignable to type '({ status: string; id: string; createdAt: string; updatedAt: string; amountCents: number; walletId: string; method: string; payoutAccountId: string; scheduledFor?: string | null | undefined; txRef?: string | ... 1 more ... | undefined; wallet?: objectOutputType<...> | ... 1 more ... | undefined; payoutAccount?: obje...'.
#21 261.9 apps/web build:     Type 'objectOutputType<{ id: ZodString; walletId: ZodString; amountCents: ZodNumber; method: ZodString; payoutAccountId: ZodString; status: ZodString; ... 5 more ...; payoutAccount: ZodOptional<...>; }, ZodTypeAny, "passthrough">' is not assignable to type '{ status: string; id: string; createdAt: string; updatedAt: string; amountCents: number; walletId: string; method: string; payoutAccountId: string; scheduledFor?: string | null | undefined; txRef?: string | ... 1 more ... | undefined; wallet?: objectOutputType<...> | ... 1 more ... | undefined; payoutAccount?: objec...'.
#21 262.0 apps/web build:       Type 'objectOutputType<{ id: ZodString; walletId: ZodString; amountCents: ZodNumber; method: ZodString; payoutAccountId: ZodString; status: ZodString; ... 5 more ...; payoutAccount: ZodOptional<...>; }, ZodTypeAny, "passthrough">' is not assignable to type '{ wallet: { user: any; }; }'.
#21 262.0 apps/web build:         Types of property 'wallet' are incompatible.
#21 262.0 apps/web build:           Type 'objectOutputType<{ id: ZodString; ownerType: ZodString; ownerId: ZodString; balanceCents: ZodNumber; }, ZodTypeAny, "passthrough"> | null | undefined' is not assignable to type '{ user: any; }'.
#21 262.0 apps/web build:             Type 'undefined' is not assignable to type '{ user: any; }'.
#21 262.0 apps/web build: [0m [90m 17 |[39m     [36mtry[39m {[0m
#21 262.0 apps/web build: [0m [90m 18 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m sdk[33m.[39mpayouts[33m.[39mgetAllPayouts()[33m;[39m[0m
#21 262.0 apps/web build: [0m[31m[1m>[22m[39m[90m 19 |[39m       setRequests(data)[33m;[39m[0m
#21 262.0 apps/web build: [0m [90m    |[39m                   [31m[1m^[22m[39m[0m
#21 262.0 apps/web build: [0m [90m 20 |[39m     } [36mcatch[39m (e) {[0m
#21 262.0 apps/web build: [0m [90m 21 |[39m       console[33m.[39merror(e)[33m;[39m[0m
#21 262.0 apps/web build: [0m [90m 22 |[39m     }[0m
#21 262.6 apps/web build: Failed
#21 266.1 /app/apps/web:
#21 266.1 ÔÇëERR_PNPM_RECURSIVE_RUN_FIRST_FAILÔÇë @propad/web@0.1.0 build: `next build`
#21 266.1 Exit status 1
#21 ERROR: process "/bin/sh -c pnpm --filter @propad/web... run build" did not complete successfully: exit code: 1
------
 > [builder 15/15] RUN pnpm --filter @propad/web... run build:
262.0 apps/web build: [0m [90m 18 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m sdk[33m.[39mpayouts[33m.[39mgetAllPayouts()[33m;[39m[0m
262.0 apps/web build: [0m[31m[1m>[22m[39m[90m 19 |[39m       setRequests(data)[33m;[39m[0m
262.0 apps/web build: [0m [90m    |[39m                   [31m[1m^[22m[39m[0m
262.0 apps/web build: [0m [90m 20 |[39m     } [36mcatch[39m (e) {[0m
262.0 apps/web build: [0m [90m 21 |[39m       console[33m.[39merror(e)[33m;[39m[0m
262.0 apps/web build: [0m [90m 22 |[39m     }[0m
262.6 apps/web build: Failed
266.1 /app/apps/web:
266.1 ÔÇëERR_PNPM_RECURSIVE_RUN_FIRST_FAILÔÇë @propad/web@0.1.0 build: `next build`
266.1 Exit status 1
------
docker : 
web.Dockerfile:26
At line:1 char:1
+ docker compose 
build web 2>&1 | 
Out-File -FilePath 
"c:\projects\propa 
...
+ ~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~
    + CategoryInfo   
           : NotSpe  
  cified: (web.Doc   
 kerfile:26:Strin    
g) [], RemoteExc    
eption
    + FullyQualified 
   ErrorId : Native  
  CommandError
 

--------------------

  24 |     WORKDIR 
/app

  25 |     

  26 | >>> RUN pnpm 
--filter 
@propad/web... run 
build

  27 |     

  28 |     FROM 
${NODE_IMAGE} AS 
runner

--------------------

failed to solve: 
process "/bin/sh -c 
pnpm --filter 
@propad/web... run 
build" did not 
complete 
successfully: exit 
code: 1

